/*
ç¼–å†™ä¸€ä¸ªç®—æ³•æ¥åˆ¤æ–­ä¸€ä¸ªæ•° n æ˜¯ä¸æ˜¯å¿«ä¹æ•°ã€‚

ã€Œå¿«ä¹æ•°ã€å®šä¹‰ä¸ºï¼šå¯¹äºä¸€ä¸ªæ­£æ•´æ•°ï¼Œæ¯ä¸€æ¬¡å°†è¯¥æ•°æ›¿æ¢ä¸ºå®ƒæ¯ä¸ªä½ç½®ä¸Šçš„æ•°å­—çš„å¹³æ–¹å’Œï¼Œç„¶åé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°è¿™ä¸ªæ•°å˜ä¸º 1ï¼Œä¹Ÿå¯èƒ½æ˜¯ æ— é™å¾ªç¯ ä½†å§‹ç»ˆå˜ä¸åˆ° 1ã€‚å¦‚æœ å¯ä»¥å˜ä¸ºÂ  1ï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°å°±æ˜¯å¿«ä¹æ•°ã€‚

å¦‚æœ n æ˜¯å¿«ä¹æ•°å°±è¿”å› True ï¼›ä¸æ˜¯ï¼Œåˆ™è¿”å› False ã€‚

Â 

ç¤ºä¾‹ï¼š

è¾“å…¥ï¼š19
è¾“å‡ºï¼štrue
è§£é‡Šï¼š
12 + 92 = 82
82 + 22 = 68
62 + 82 = 100
12 + 02 + 02 = 1

*/

/// <summary>
/// https://leetcode-cn.com/problems/happy-number/
/// 202. å¿«ä¹æ•°
///
///
/// </summary>
internal class HappyNumberSolution
{
    public void Test()
    {
        //int[] nums = new int[] {3, 2, 4};
        //int k = 6;
        //var ret = LevelOrder((int[]) nums.Clone(), k);

        //Console.WriteLine(string.Join(",", ret.Select(v => v.ToString())));
    }

    public bool IsHappy(int n)
    {
        int slow = n;
        int fast = GetNext(n);
        while (fast != 1 && slow != fast)
        {
            slow = GetNext(slow);
            fast = GetNext(GetNext(fast));
        }
        return fast == 1;

        int GetNext(int n)
        {
            int ret = 0;
            while (0 < n)
            {
                int d = n % 10;
                n /= 10;
                ret += d * d;
            }
            return ret;
        }
    }
}

/*

å¿«ä¹æ•°
åŠ›æ‰£å®˜æ–¹é¢˜è§£
å‘å¸ƒäº 2020-04-29
30.1k
ğŸ“º è§†é¢‘é¢˜è§£

ğŸ“– æ–‡å­—é¢˜è§£
æ–¹æ³•ä¸€ï¼šç”¨ HashSet æ£€æµ‹å¾ªç¯
æˆ‘ä»¬å¯ä»¥å…ˆä¸¾å‡ ä¸ªä¾‹å­ã€‚æˆ‘ä»¬ä» 77 å¼€å§‹ã€‚åˆ™ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ 4949ï¼ˆå› ä¸º 7^2=497 
2
 =49ï¼‰ï¼Œç„¶åä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ 9797ï¼ˆå› ä¸º 4^2+9^2=974 
2
 +9 
2
 =97ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥ä¸æ–­é‡å¤è¯¥çš„è¿‡ç¨‹ï¼Œç›´åˆ°æˆ‘ä»¬å¾—åˆ° 11ã€‚å› ä¸ºæˆ‘ä»¬å¾—åˆ°äº† 11ï¼Œæˆ‘ä»¬çŸ¥é“ 77 æ˜¯ä¸€ä¸ªå¿«ä¹æ•°ï¼Œå‡½æ•°åº”è¯¥è¿”å› trueã€‚

fig1

å†ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬ä» 116116 å¼€å§‹ã€‚é€šè¿‡åå¤é€šè¿‡å¹³æ–¹å’Œè®¡ç®—ä¸‹ä¸€ä¸ªæ•°å­—ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ° 5858ï¼Œå†ç»§ç»­è®¡ç®—ä¹‹åï¼Œæˆ‘ä»¬åˆå›åˆ° 5858ã€‚ç”±äºæˆ‘ä»¬å›åˆ°äº†ä¸€ä¸ªå·²ç»è®¡ç®—è¿‡çš„æ•°å­—ï¼Œå¯ä»¥çŸ¥é“æœ‰ä¸€ä¸ªå¾ªç¯ï¼Œå› æ­¤ä¸å¯èƒ½è¾¾åˆ° 11ã€‚æ‰€ä»¥å¯¹äº 116116ï¼Œå‡½æ•°åº”è¯¥è¿”å› falseã€‚

fig2

æ ¹æ®æˆ‘ä»¬çš„æ¢ç´¢ï¼Œæˆ‘ä»¬çŒœæµ‹ä¼šæœ‰ä»¥ä¸‹ä¸‰ç§å¯èƒ½ã€‚

æœ€ç»ˆä¼šå¾—åˆ° 11ã€‚
æœ€ç»ˆä¼šè¿›å…¥å¾ªç¯ã€‚
å€¼ä¼šè¶Šæ¥è¶Šå¤§ï¼Œæœ€åæ¥è¿‘æ— ç©·å¤§ã€‚
ç¬¬ä¸‰ä¸ªæƒ…å†µæ¯”è¾ƒéš¾ä»¥æ£€æµ‹å’Œå¤„ç†ã€‚æˆ‘ä»¬æ€ä¹ˆçŸ¥é“å®ƒä¼šç»§ç»­å˜å¤§ï¼Œè€Œä¸æ˜¯æœ€ç»ˆå¾—åˆ° 11 å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä»”ç»†æƒ³ä¸€æƒ³ï¼Œæ¯ä¸€ä½æ•°çš„æœ€å¤§æ•°å­—çš„ä¸‹ä¸€ä½æ•°æ˜¯å¤šå°‘ã€‚

Digits	Largest	Next
1	9	81
2	99	162
3	999	243
4	9999	324
13	9999999999999	1053
å¯¹äº 33 ä½æ•°çš„æ•°å­—ï¼Œå®ƒä¸å¯èƒ½å¤§äº 243243ã€‚è¿™æ„å‘³ç€å®ƒè¦ä¹ˆè¢«å›°åœ¨ 243243 ä»¥ä¸‹çš„å¾ªç¯å†…ï¼Œè¦ä¹ˆè·Œåˆ° 11ã€‚44 ä½æˆ– 44 ä½ä»¥ä¸Šçš„æ•°å­—åœ¨æ¯ä¸€æ­¥éƒ½ä¼šä¸¢å¤±ä¸€ä½ï¼Œç›´åˆ°é™åˆ° 33 ä½ä¸ºæ­¢ã€‚æ‰€ä»¥æˆ‘ä»¬çŸ¥é“ï¼Œæœ€åçš„æƒ…å†µä¸‹ï¼Œç®—æ³•å¯èƒ½ä¼šåœ¨ 243243 ä»¥ä¸‹çš„æ‰€æœ‰æ•°å­—ä¸Šå¾ªç¯ï¼Œç„¶åå›åˆ°å®ƒå·²ç»åˆ°è¿‡çš„ä¸€ä¸ªå¾ªç¯æˆ–è€…å›åˆ° 11ã€‚ä½†å®ƒä¸ä¼šæ— é™æœŸåœ°è¿›è¡Œä¸‹å»ï¼Œæ‰€ä»¥æˆ‘ä»¬æ’é™¤ç¬¬ä¸‰ç§é€‰æ‹©ã€‚

å³ä½¿åœ¨ä»£ç ä¸­ä½ ä¸éœ€è¦å¤„ç†ç¬¬ä¸‰ç§æƒ…å†µï¼Œä½ ä»ç„¶éœ€è¦ç†è§£ä¸ºä»€ä¹ˆå®ƒæ°¸è¿œä¸ä¼šå‘ç”Ÿï¼Œè¿™æ ·ä½ å°±å¯ä»¥è¯æ˜ä¸ºä»€ä¹ˆä½ ä¸å¤„ç†å®ƒã€‚

ç®—æ³•ï¼š

ç®—æ³•åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦è®¾è®¡å’Œç¼–å†™ä»£ç ã€‚

ç»™ä¸€ä¸ªæ•°å­— nnï¼Œå®ƒçš„ä¸‹ä¸€ä¸ªæ•°å­—æ˜¯ä»€ä¹ˆï¼Ÿ
æŒ‰ç…§ä¸€ç³»åˆ—çš„æ•°å­—æ¥åˆ¤æ–­æˆ‘ä»¬æ˜¯å¦è¿›å…¥äº†ä¸€ä¸ªå¾ªç¯ã€‚
ç¬¬ 1 éƒ¨åˆ†æˆ‘ä»¬æŒ‰ç…§é¢˜ç›®çš„è¦æ±‚åšæ•°ä½åˆ†ç¦»ï¼Œæ±‚å¹³æ–¹å’Œã€‚

ç¬¬ 2 éƒ¨åˆ†å¯ä»¥ä½¿ç”¨ HashSet å®Œæˆã€‚æ¯æ¬¡ç”Ÿæˆé“¾ä¸­çš„ä¸‹ä¸€ä¸ªæ•°å­—æ—¶ï¼Œæˆ‘ä»¬éƒ½ä¼šæ£€æŸ¥å®ƒæ˜¯å¦å·²ç»åœ¨ HashSet ä¸­ã€‚

å¦‚æœå®ƒä¸åœ¨ HashSet ä¸­ï¼Œæˆ‘ä»¬åº”è¯¥æ·»åŠ å®ƒã€‚
å¦‚æœå®ƒåœ¨ HashSet ä¸­ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¤„äºä¸€ä¸ªå¾ªç¯ä¸­ï¼Œå› æ­¤åº”è¯¥è¿”å› falseã€‚
æˆ‘ä»¬ä½¿ç”¨ HashSet è€Œä¸æ˜¯å‘é‡ã€åˆ—è¡¨æˆ–æ•°ç»„çš„åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬åå¤æ£€æŸ¥å…¶ä¸­æ˜¯å¦å­˜åœ¨æŸæ•°å­—ã€‚æ£€æŸ¥æ•°å­—æ˜¯å¦åœ¨å“ˆå¸Œé›†ä¸­éœ€è¦ O(1)O(1) çš„æ—¶é—´ï¼Œè€Œå¯¹äºå…¶ä»–æ•°æ®ç»“æ„ï¼Œåˆ™éœ€è¦ O(n)O(n) çš„æ—¶é—´ã€‚é€‰æ‹©æ­£ç¡®çš„æ•°æ®ç»“æ„æ˜¯è§£å†³è¿™äº›é—®é¢˜çš„å…³é”®éƒ¨åˆ†ã€‚


class Solution {
    private int getNext(int n) {
        int totalSum = 0;
        while (n > 0) {
            int d = n % 10;
            n = n / 10;
            totalSum += d * d;
        }
        return totalSum;
    }

    public bool IsHappy(int n) {
        HashSet <int> seen = new HashSet<int>();
        while (n != 1 && !seen.Contains(n)) {
            seen.Add(n);
            n = getNext(n);
        }
        return n == 1;
    }
}
å¤æ‚åº¦åˆ†æ

ç¡®å®šè¿™ä¸ªé—®é¢˜çš„æ—¶é—´å¤æ‚åº¦å¯¹äºä¸€ä¸ª â€œç®€å•â€ çº§åˆ«çš„é—®é¢˜æ¥è¯´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚å¦‚æœæ‚¨å¯¹è¿™äº›é—®é¢˜è¿˜ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å°è¯•åªè®¡ç®— getNext(n) å‡½æ•°çš„æ—¶é—´å¤æ‚åº¦ã€‚

æ—¶é—´å¤æ‚åº¦ï¼šO(243 \cdot 3 + \log n + \log\log n + \log\log\log n)...O(243â‹…3+logn+loglogn+logloglogn)... = O(\log n)O(logn)ã€‚
æŸ¥æ‰¾ç»™å®šæ•°å­—çš„ä¸‹ä¸€ä¸ªå€¼çš„æˆæœ¬ä¸º O(\log n)O(logn)ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨å¤„ç†æ•°å­—ä¸­çš„æ¯ä½æ•°å­—ï¼Œè€Œæ•°å­—ä¸­çš„ä½æ•°ç”± \log nlogn ç»™å®šã€‚
è¦è®¡ç®—å‡ºæ€»çš„æ—¶é—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬éœ€è¦ä»”ç»†è€ƒè™‘å¾ªç¯ä¸­æœ‰å¤šå°‘ä¸ªæ•°å­—ï¼Œå®ƒä»¬æœ‰å¤šå¤§ã€‚
æˆ‘ä»¬åœ¨ä¸Šé¢ç¡®å®šï¼Œä¸€æ—¦ä¸€ä¸ªæ•°å­—ä½äº 243243ï¼Œå®ƒå°±ä¸å¯èƒ½å›åˆ° 243243 ä»¥ä¸Šã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨ 243243 ä»¥ä¸‹æœ€é•¿å¾ªç¯çš„é•¿åº¦æ¥ä»£æ›¿ 243243ï¼Œä¸è¿‡ï¼Œå› ä¸ºå¸¸æ•°æ— è®ºå¦‚ä½•éƒ½æ— å…³ç´§è¦ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ä¼šæ‹…å¿ƒå®ƒã€‚
å¯¹äºé«˜äº 243243 çš„ nnï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘å¾ªç¯ä¸­æ¯ä¸ªæ•°é«˜äº 243243 çš„æˆæœ¬ã€‚é€šè¿‡æ•°å­¦è¿ç®—ï¼Œæˆ‘ä»¬å¯ä»¥è¯æ˜åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿™äº›æˆæœ¬å°†æ˜¯ O(\log n) + O(\log \log n) + O(\log \log \log n)...O(logn)+O(loglogn)+O(logloglogn)...ã€‚å¹¸è¿çš„æ˜¯ï¼ŒO(\log n)O(logn) æ˜¯å ä¸»å¯¼åœ°ä½çš„éƒ¨åˆ†ï¼Œè€Œå…¶ä»–éƒ¨åˆ†ç›¸æ¯”ä¹‹ä¸‹éƒ½å¾ˆå°ï¼ˆæ€»çš„æ¥è¯´ï¼Œå®ƒä»¬çš„æ€»å’Œå°äº\log nlognï¼‰ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¿½ç•¥å®ƒä»¬ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(\log n)O(logn)ã€‚ä¸æ—¶é—´å¤æ‚åº¦å¯†åˆ‡ç›¸å…³çš„æ˜¯è¡¡é‡æˆ‘ä»¬æ”¾å…¥ HashSet ä¸­çš„æ•°å­—ä»¥åŠå®ƒä»¬æœ‰å¤šå¤§çš„æŒ‡æ ‡ã€‚å¯¹äºè¶³å¤Ÿå¤§çš„ nnï¼Œå¤§éƒ¨åˆ†ç©ºé—´å°†ç”± nn æœ¬èº«å ç”¨ã€‚æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ä¼˜åŒ–åˆ° O(243 \cdot 3) = O(1)O(243â‹…3)=O(1)ï¼Œæ–¹æ³•æ˜¯åªä¿å­˜é›†åˆä¸­å°äº 243243 çš„æ•°å­—ï¼Œå› ä¸ºå¯¹äºè¾ƒé«˜çš„æ•°å­—ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸å¯èƒ½è¿”å›åˆ°å®ƒä»¬ã€‚
æ–¹æ³•äºŒï¼šå¿«æ…¢æŒ‡é’ˆæ³•
é€šè¿‡åå¤è°ƒç”¨ getNext(n) å¾—åˆ°çš„é“¾æ˜¯ä¸€ä¸ªéšå¼çš„é“¾è¡¨ã€‚éšå¼æ„å‘³ç€æˆ‘ä»¬æ²¡æœ‰å®é™…çš„é“¾è¡¨èŠ‚ç‚¹å’ŒæŒ‡é’ˆï¼Œä½†æ•°æ®ä»ç„¶å½¢æˆé“¾è¡¨ç»“æ„ã€‚èµ·å§‹æ•°å­—æ˜¯é“¾è¡¨çš„å¤´ â€œèŠ‚ç‚¹â€ï¼Œé“¾ä¸­çš„æ‰€æœ‰å…¶ä»–æ•°å­—éƒ½æ˜¯èŠ‚ç‚¹ã€‚next æŒ‡é’ˆæ˜¯é€šè¿‡è°ƒç”¨ getNext(n) å‡½æ•°è·å¾—ã€‚

æ„è¯†åˆ°æˆ‘ä»¬å®é™…æœ‰ä¸ªé“¾è¡¨ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±å¯ä»¥è½¬æ¢ä¸ºæ£€æµ‹ä¸€ä¸ªé“¾è¡¨æ˜¯å¦æœ‰ç¯ã€‚å› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œå¯ä»¥ä½¿ç”¨å¼—æ´›ä¼Šå¾·å¾ªç¯æŸ¥æ‰¾ç®—æ³•ã€‚è¿™ä¸ªç®—æ³•æ˜¯ä¸¤ä¸ªå¥”è·‘é€‰æ‰‹ï¼Œä¸€ä¸ªè·‘çš„å¿«ï¼Œä¸€ä¸ªè·‘å¾—æ…¢ã€‚åœ¨é¾Ÿå…”èµ›è·‘çš„å¯“è¨€ä¸­ï¼Œè·‘çš„å¿«çš„ç§°ä¸º â€œä¹Œé¾Ÿâ€ï¼Œè·‘å¾—å¿«çš„ç§°ä¸º â€œå…”å­â€ã€‚

ä¸ç®¡ä¹Œé¾Ÿå’Œå…”å­åœ¨å¾ªç¯ä¸­ä»å“ªé‡Œå¼€å§‹ï¼Œå®ƒä»¬æœ€ç»ˆéƒ½ä¼šç›¸é‡ã€‚è¿™æ˜¯å› ä¸ºå…”å­æ¯èµ°ä¸€æ­¥å°±å‘ä¹Œé¾Ÿé è¿‘ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆåœ¨å®ƒä»¬çš„ç§»åŠ¨æ–¹å‘ä¸Šï¼‰ã€‚



ç®—æ³•ï¼š

æˆ‘ä»¬ä¸æ˜¯åªè·Ÿè¸ªé“¾è¡¨ä¸­çš„ä¸€ä¸ªå€¼ï¼Œè€Œæ˜¯è·Ÿè¸ªä¸¤ä¸ªå€¼ï¼Œç§°ä¸ºå¿«è·‘è€…å’Œæ…¢è·‘è€…ã€‚åœ¨ç®—æ³•çš„æ¯ä¸€æ­¥ä¸­ï¼Œæ…¢é€Ÿåœ¨é“¾è¡¨ä¸­å‰è¿› 1 ä¸ªèŠ‚ç‚¹ï¼Œå¿«è·‘è€…å‰è¿› 2 ä¸ªèŠ‚ç‚¹ï¼ˆå¯¹ getNext(n) å‡½æ•°çš„åµŒå¥—è°ƒç”¨ï¼‰ã€‚

å¦‚æœ n æ˜¯ä¸€ä¸ªå¿«ä¹æ•°ï¼Œå³æ²¡æœ‰å¾ªç¯ï¼Œé‚£ä¹ˆå¿«è·‘è€…æœ€ç»ˆä¼šæ¯”æ…¢è·‘è€…å…ˆåˆ°è¾¾æ•°å­— 1ã€‚

å¦‚æœ n ä¸æ˜¯ä¸€ä¸ªå¿«ä¹çš„æ•°å­—ï¼Œé‚£ä¹ˆæœ€ç»ˆå¿«è·‘è€…å’Œæ…¢è·‘è€…å°†åœ¨åŒä¸€ä¸ªæ•°å­—ä¸Šç›¸é‡ã€‚


class Solution {
    public int getNext(int n) {
        int totalSum = 0;
        while (n > 0) {
            int d = n % 10;
            n = n / 10;
            totalSum += d * d;
        }
        return totalSum;
    }

    public bool IsHappy(int n) {
        int slowRunner = n;
        int fastRunner = getNext(n);
        while (fastRunner != 1 && slowRunner != fastRunner) {
            slowRunner = getNext(slowRunner);
            fastRunner = getNext(getNext(fastRunner));
        }
        return fastRunner == 1;
    }
}
å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(\log n)O(logn)ã€‚è¯¥åˆ†æå»ºç«‹åœ¨å¯¹å‰ä¸€ç§æ–¹æ³•çš„åˆ†æçš„åŸºç¡€ä¸Šï¼Œä½†æ˜¯è¿™æ¬¡æˆ‘ä»¬éœ€è¦è·Ÿè¸ªä¸¤ä¸ªæŒ‡é’ˆè€Œä¸æ˜¯ä¸€ä¸ªæŒ‡é’ˆæ¥åˆ†æï¼Œä»¥åŠåœ¨å®ƒä»¬ç›¸é‡å‰éœ€è¦ç»•ç€è¿™ä¸ªå¾ªç¯èµ°å¤šå°‘æ¬¡ã€‚
å¦‚æœæ²¡æœ‰å¾ªç¯ï¼Œé‚£ä¹ˆå¿«è·‘è€…å°†å…ˆåˆ°è¾¾ 1ï¼Œæ…¢è·‘è€…å°†åˆ°è¾¾é“¾è¡¨ä¸­çš„ä¸€åŠã€‚æˆ‘ä»¬çŸ¥é“æœ€åçš„æƒ…å†µä¸‹ï¼Œæˆæœ¬æ˜¯ O(2 \cdot \log n) = O(\log n)O(2â‹…logn)=O(logn)ã€‚
ä¸€æ—¦ä¸¤ä¸ªæŒ‡é’ˆéƒ½åœ¨å¾ªç¯ä¸­ï¼Œåœ¨æ¯ä¸ªå¾ªç¯ä¸­ï¼Œå¿«è·‘è€…å°†ç¦»æ…¢è·‘è€…æ›´è¿‘ä¸€æ­¥ã€‚ä¸€æ—¦å¿«è·‘è€…è½åæ…¢è·‘è€…ä¸€æ­¥ï¼Œä»–ä»¬å°±ä¼šåœ¨ä¸‹ä¸€æ­¥ç›¸é‡ã€‚å‡è®¾å¾ªç¯ä¸­æœ‰ kk ä¸ªæ•°å­—ã€‚å¦‚æœä»–ä»¬çš„èµ·ç‚¹æ˜¯ç›¸éš” k-1kâˆ’1 çš„ä½ç½®ï¼ˆè¿™æ˜¯ä»–ä»¬å¯ä»¥å¼€å§‹çš„æœ€è¿œçš„è·ç¦»ï¼‰ï¼Œé‚£ä¹ˆå¿«è·‘è€…éœ€è¦ k-1kâˆ’1 æ­¥æ‰èƒ½åˆ°è¾¾æ…¢è·‘è€…ï¼Œè¿™å¯¹äºæˆ‘ä»¬çš„ç›®çš„æ¥è¯´ä¹Ÿæ˜¯ä¸å˜çš„ã€‚å› æ­¤ï¼Œä¸»æ“ä½œä»ç„¶åœ¨è®¡ç®—èµ·å§‹ n çš„ä¸‹ä¸€ä¸ªå€¼ï¼Œå³ O(\log n)O(logn)ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ï¼Œå¯¹äºè¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦å“ˆå¸Œé›†æ¥æ£€æµ‹å¾ªç¯ã€‚æŒ‡é’ˆéœ€è¦å¸¸æ•°çš„é¢å¤–ç©ºé—´ã€‚
æ–¹æ³•ä¸‰ï¼šæ•°å­¦
å‰ä¸¤ç§æ–¹æ³•æ˜¯ä½ åœ¨é¢è¯•ä¸­åº”è¯¥æƒ³åˆ°çš„ã€‚ç¬¬ä¸‰ç§æ–¹æ³•ä¸æ˜¯ä½ åœ¨é¢è¯•ä¸­ä¼šå†™çš„ï¼Œè€Œæ˜¯é’ˆå¯¹å¯¹æ•°å­¦å¥½å¥‡çš„äººï¼Œå› ä¸ºå®ƒå¾ˆæœ‰è¶£ã€‚

ä¸‹ä¸€ä¸ªå€¼å¯èƒ½æ¯”è‡ªå·±å¤§çš„æœ€å¤§æ•°å­—æ˜¯ä»€ä¹ˆï¼Ÿæ ¹æ®æˆ‘ä»¬ä¹‹å‰çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“å®ƒå¿…é¡»ä½äº 243ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çŸ¥é“ä»»ä½•å¾ªç¯éƒ½å¿…é¡»åŒ…å«å°äº 243 çš„æ•°å­—ï¼Œç”¨è¿™ä¹ˆå°çš„æ•°å­—ï¼Œç¼–å†™ä¸€ä¸ªèƒ½æ‰¾åˆ°æ‰€æœ‰å‘¨æœŸçš„å¼ºåŠ›ç¨‹åºå¹¶ä¸å›°éš¾ã€‚

å¦‚æœè¿™æ ·åšï¼Œæ‚¨ä¼šå‘ç°åªæœ‰ä¸€ä¸ªå¾ªç¯ï¼š4 \rightarrow 16 \rightarrow 37 \rightarrow 58 \rightarrow 89 \rightarrow 145 \rightarrow 42 \rightarrow 20 \rightarrow 44â†’16â†’37â†’58â†’89â†’145â†’42â†’20â†’4ã€‚æ‰€æœ‰å…¶ä»–æ•°å­—éƒ½åœ¨è¿›å…¥è¿™ä¸ªå¾ªç¯çš„é“¾ä¸Šï¼Œæˆ–è€…åœ¨è¿›å…¥ 11 çš„é“¾ä¸Šã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç¡¬ç¼–ç ä¸€ä¸ªåŒ…å«è¿™äº›æ•°å­—çš„æ•£åˆ—é›†ï¼Œå¦‚æœæˆ‘ä»¬è¾¾åˆ°å…¶ä¸­ä¸€ä¸ªæ•°å­—ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“åœ¨å¾ªç¯ä¸­ã€‚

ç®—æ³•ï¼š


class Solution {
    public int getNext(int n) {
        int totalSum = 0;
        while (n > 0) {
            int d = n % 10;
            n = n / 10;
            totalSum += d * d;
        }
        return totalSum;
    }

    public bool IsHappy(int n) {
        HashSet<int> cycleMembers =
            new HashSet<int>(new int[8] {4, 16, 37, 58, 89, 145, 42, 20});

        while (n != 1 && !cycleMembers.Contains(n)) {
            n = getNext(n);
        }
        return n == 1;
    }
}
å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(\log n)O(logn)ã€‚å’Œä¸Šé¢ä¸€æ ·ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ï¼Œæˆ‘ä»¬æ²¡æœ‰ä¿ç•™æˆ‘ä»¬æ‰€é‡åˆ°çš„æ•°å­—çš„å†å²è®°å½•ã€‚ç¡¬ç¼–ç å“ˆå¸Œé›†çš„å¤§å°æ˜¯å›ºå®šçš„ã€‚
ä¸‹ä¸€ç¯‡ï¼šå¿«ä¹çš„çŸ¥è¯†ç‚¹å¢åŠ äº†

public class Solution {
    public bool IsHappy(int n) {
        HashSet<int> hs = new HashSet<int>();
        int curNum = n;
        while (true)
        {
            int res = 0;
            while(curNum > 0)
            {
                res += (curNum % 10) * (curNum % 10);
                curNum /= 10;
            }
            if(res == 1)
            {
                return true;
            }
            else if (hs.Contains(res))
            {
                return false;
            }
            else
            {
                hs.Add(res);
            }
            curNum = res;
        } 
    }
}

public class Solution
{
	HashSet<int> chked=new HashSet<int>();
	int Next(int num)
	{
		int next = 0;
		while (num != 0)
		{
			int t = num % 10;
			next += t * t;
			num /= 10;
		}
		return next;
	}
	public bool IsHappy(int n)
	{
		while (n >= 163) n = Next(n);//Next(999)=243;Next(9_999_999_999_999)=1053;Next(199)=163
		if (n == 1) return true;
		else if (chked.Contains(n)) return false;
		else
		{
			chked.Add(n);
			return IsHappy(Next(n));
		}
	}
}

*/