using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

/*
ç»™å®šä¸€ä¸ªåŒ…å« n + 1 ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œå…¶æ•°å­—éƒ½åœ¨ 1 åˆ° n ä¹‹é—´ï¼ˆåŒ…æ‹¬ 1 å’Œ nï¼‰ï¼Œ
å¯çŸ¥è‡³å°‘å­˜åœ¨ä¸€ä¸ªé‡å¤çš„æ•´æ•°ã€‚å‡è®¾åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•´æ•°ï¼Œæ‰¾å‡ºè¿™ä¸ªé‡å¤çš„æ•°ã€‚

ç¤ºä¾‹ 1:

è¾“å…¥: [1,3,4,2,2]
è¾“å‡º: 2
ç¤ºä¾‹ 2:

è¾“å…¥: [3,1,3,4,2]
è¾“å‡º: 3
è¯´æ˜ï¼š

ä¸èƒ½æ›´æ”¹åŸæ•°ç»„ï¼ˆå‡è®¾æ•°ç»„æ˜¯åªè¯»çš„ï¼‰ã€‚
åªèƒ½ä½¿ç”¨é¢å¤–çš„ O(1) çš„ç©ºé—´ã€‚
æ—¶é—´å¤æ‚åº¦å°äº O(n2) ã€‚
æ•°ç»„ä¸­åªæœ‰ä¸€ä¸ªé‡å¤çš„æ•°å­—ï¼Œä½†å®ƒå¯èƒ½ä¸æ­¢é‡å¤å‡ºç°ä¸€æ¬¡ã€‚ 
     
     
     
*/
/// <summary>
/// https://leetcode-cn.com/problems/find-the-duplicate-number/
/// 287. å¯»æ‰¾é‡å¤æ•°
/// https://blog.csdn.net/qq_39745284/article/details/82419207
/// https://blog.csdn.net/weixin_39789689/article/details/82420653
/// </summary>
class FindTheDuplicateNumberSolution
{
    public void Test()
    {
        //int[] nums = new int[] {3, 2, 4};
        //int k = 6;
        //var ret = LevelOrder((int[]) nums.Clone(), k);

        //Console.WriteLine(string.Join(",", ret.Select(v => v.ToString())));
    }

    public int FindDuplicate(int[] nums)
    {
        int speedX1 = 0;
        int speedX2 = 0;

        do
        {
            speedX1 = nums[speedX1];
            speedX2 = nums[nums[speedX2]];
        } while (speedX1 != speedX2);

        speedX1 = 0;
        while (speedX1 != speedX2)
        {
            speedX1 = nums[speedX1];
            speedX2 = nums[speedX2];
        }

        return speedX1;
    }
}
/*
å¯»æ‰¾é‡å¤æ•°
åŠ›æ‰£å®˜æ–¹é¢˜è§£
å‘å¸ƒäº 2020-05-25
58.1k
ğŸ“º è§†é¢‘é¢˜è§£

ğŸ“– æ–‡å­—é¢˜è§£
æ–¹æ³•ä¸€ï¼šäºŒåˆ†æŸ¥æ‰¾
æ€è·¯å’Œç®—æ³•

æˆ‘ä»¬å®šä¹‰ \textit{cnt}[i]cnt[i] è¡¨ç¤º \textit{nums}[]nums[] æ•°ç»„ä¸­å°äºç­‰äº ii çš„æ•°æœ‰å¤šå°‘ä¸ªï¼Œå‡è®¾æˆ‘ä»¬é‡å¤çš„æ•°æ˜¯ \textit{target}targetï¼Œé‚£ä¹ˆ [1,\textit{target}-1][1,targetâˆ’1]é‡Œçš„æ‰€æœ‰æ•°æ»¡è¶³ \textit{cnt}[i]\le icnt[i]â‰¤iï¼Œ[target,n][target,n] é‡Œçš„æ‰€æœ‰æ•°æ»¡è¶³ \textit{cnt}[i]>icnt[i]>iï¼Œå…·æœ‰å•è°ƒæ€§ã€‚

ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œæˆ‘ä»¬åˆ—å‡ºæ¯ä¸ªæ•°å­—çš„ \textit{cnt}cnt å€¼ï¼š

nums	1	2	3	4
cnt	1	3	4	5
ç¤ºä¾‹ä¸­é‡å¤çš„æ•´æ•°æ˜¯ 22ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° [1,1][1,1] ä¸­çš„æ•°æ»¡è¶³ \textit{cnt}[i]\le icnt[i]â‰¤iï¼Œ[2,4][2,4] ä¸­çš„æ•°æ»¡è¶³ \textit{cnt}[i]>icnt[i]>i ã€‚

å¦‚æœçŸ¥é“ \textit{cnt}[]cnt[] æ•°ç»„éšæ•°å­— ii é€æ¸å¢å¤§å…·æœ‰å•è°ƒæ€§ï¼ˆå³ \textit{target}target å‰ \textit{cnt}[i]\le icnt[i]â‰¤iï¼Œ\textit{target}target å \textit{cnt}[i]>icnt[i]>iï¼‰ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åˆ©ç”¨äºŒåˆ†æŸ¥æ‰¾æ¥æ‰¾åˆ°é‡å¤çš„æ•°ã€‚

ä½†è¿™ä¸ªæ€§è´¨ä¸€å®šæ˜¯æ­£ç¡®çš„å—ï¼Ÿè€ƒè™‘ \textit{nums}[]nums[] æ•°ç»„ä¸€å…±æœ‰ n+1n+1 ä¸ªä½ç½®ï¼Œæˆ‘ä»¬å¡«å…¥çš„æ•°å­—éƒ½åœ¨ [1,n][1,n] é—´ï¼Œæœ‰ä¸”åªæœ‰ä¸€ä¸ªæ•°é‡å¤æ”¾äº†ä¸¤æ¬¡ä»¥ä¸Šã€‚å¯¹äºæ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ï¼Œè€ƒè™‘ä»¥ä¸‹ä¸¤ç§æƒ…å†µï¼š

å¦‚æœæµ‹è¯•ç”¨ä¾‹çš„æ•°ç»„ä¸­ \textit{target}target å‡ºç°äº†ä¸¤æ¬¡ï¼Œå…¶ä½™çš„æ•°å„å‡ºç°äº†ä¸€æ¬¡ï¼Œè¿™ä¸ªæ—¶å€™è‚¯å®šæ»¡è¶³ä¸Šæ–‡æåŠçš„æ€§è´¨ï¼Œå› ä¸ºå°äº \textit{target}target çš„æ•° ii æ»¡è¶³ \textit{cnt}[i]=icnt[i]=iï¼Œå¤§äºç­‰äº \textit{target}target çš„æ•° jj æ»¡è¶³ cnt[j]=j+1cnt[j]=j+1ã€‚

å¦‚æœæµ‹è¯•ç”¨ä¾‹çš„æ•°ç»„ä¸­ \textit{target}target å‡ºç°äº†ä¸‰æ¬¡åŠä»¥ä¸Šï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰ä¸€äº›æ•°ä¸åœ¨ \textit{nums}[]nums[] æ•°ç»„ä¸­äº†ï¼Œè¿™ä¸ªæ—¶å€™ç›¸å½“äºæˆ‘ä»¬ç”¨ \textit{target}target å»æ›¿æ¢äº†è¿™äº›æ•°ï¼Œæˆ‘ä»¬è€ƒè™‘æ›¿æ¢çš„æ—¶å€™å¯¹ \textit{cnt}[]cnt[] æ•°ç»„çš„å½±å“ã€‚å¦‚æœæ›¿æ¢çš„æ•° ii å°äº \textit{target}target ï¼Œé‚£ä¹ˆ [i, \textit{target}-1][i,targetâˆ’1] çš„ \textit{cnt}cnt å€¼å‡å‡ä¸€ï¼Œå…¶ä»–ä¸å˜ï¼Œæ»¡è¶³æ¡ä»¶ã€‚å¦‚æœæ›¿æ¢çš„æ•° jj å¤§äºç­‰äº \textit{target}targetï¼Œé‚£ä¹ˆ [\textit{target}, j-1][target,jâˆ’1] çš„ \textit{cnt}cnt å€¼å‡åŠ ä¸€ï¼Œå…¶ä»–ä¸å˜ï¼Œäº¦æ»¡è¶³æ¡ä»¶ã€‚

å› æ­¤æˆ‘ä»¬ç”Ÿæˆçš„æ•°ç»„ä¸€å®šå…·æœ‰ä¸Šè¿°æ€§è´¨çš„ã€‚


class Solution {
    public int findDuplicate(int[] nums) {
        int n = nums.length;
        int l = 1, r = n - 1, ans = -1;
        while (l <= r) {
            int mid = (l + r) >> 1;
            int cnt = 0;
            for (int i = 0; i < n; ++i) {
                if (nums[i] <= mid) {
                    cnt++;
                }
            }
            if (cnt <= mid) {
                l = mid + 1;
            } else {
                r = mid - 1;
                ans = mid;
            }
        }
        return ans;
    }
}
å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(n\log n)O(nlogn)ï¼Œå…¶ä¸­ nn ä¸º \textit{nums}[]nums[] æ•°ç»„çš„é•¿åº¦ã€‚äºŒåˆ†æŸ¥æ‰¾æœ€å¤šéœ€è¦äºŒåˆ† O(\log n)O(logn) æ¬¡ï¼Œæ¯æ¬¡åˆ¤æ–­çš„æ—¶å€™éœ€è¦O(n)O(n) éå† \textit{nums}[]nums[] æ•°ç»„æ±‚è§£å°äºç­‰äº \textit{mid}mid çš„æ•°çš„ä¸ªæ•°ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n\log n)O(nlogn)ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚
æ–¹æ³•äºŒï¼šäºŒè¿›åˆ¶
æ€è·¯å’Œç®—æ³•

è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬æ¥å°†æ‰€æœ‰æ•°äºŒè¿›åˆ¶å±•å¼€æŒ‰ä½è€ƒè™‘å¦‚ä½•æ‰¾å‡ºé‡å¤çš„æ•°ï¼Œå¦‚æœæˆ‘ä»¬èƒ½ç¡®å®šé‡å¤æ•°æ¯ä¸€ä½æ˜¯ 11 è¿˜æ˜¯ 00 å°±å¯ä»¥æŒ‰ä½è¿˜åŸå‡ºé‡å¤çš„æ•°æ˜¯ä»€ä¹ˆã€‚

è€ƒè™‘åˆ°ç¬¬ ii ä½ï¼Œæˆ‘ä»¬è®° \textit{nums}[]nums[] æ•°ç»„ä¸­äºŒè¿›åˆ¶å±•å¼€åç¬¬ ii ä½ä¸º 11 çš„æ•°æœ‰ xx ä¸ªï¼Œæ•°å­— [1,n][1,n] è¿™ nn ä¸ªæ•°äºŒè¿›åˆ¶å±•å¼€åç¬¬ ii ä½ä¸º 11 çš„æ•°æœ‰ yy ä¸ªï¼Œé‚£ä¹ˆé‡å¤çš„æ•°ç¬¬ ii ä½ä¸º 11 å½“ä¸”ä»…å½“ x>yx>yã€‚

ä»ç„¶ä»¥ç¤ºä¾‹ 1 ä¸ºä¾‹ï¼Œå¦‚ä¸‹çš„è¡¨æ ¼åˆ—å‡ºäº†æ¯ä¸ªæ•°å­—äºŒè¿›åˆ¶ä¸‹æ¯ä¸€ä½æ˜¯ 11 è¿˜æ˜¯ 00 ä»¥åŠå¯¹åº”ä½çš„ xx å’Œ yy æ˜¯å¤šå°‘ï¼š

 	1	3	4	2	2	x	y
ç¬¬ 0 ä½	1	1	0	0	0	2	2
ç¬¬ 1 ä½	0	1	0	1	1	3	2
ç¬¬ 2 ä½	0	0	1	0	0	1	1
é‚£ä¹ˆæŒ‰ä¹‹å‰è¯´çš„æˆ‘ä»¬å‘ç°åªæœ‰ç¬¬ 11 ä½ x>yx>y ï¼Œæ‰€ä»¥æŒ‰ä½è¿˜åŸå \textit{target}=(010)_2=(2)_{10}target=(010) 
2
â€‹	
 =(2) 
10
â€‹	
 ï¼Œç¬¦åˆç­”æ¡ˆã€‚

æ­£ç¡®æ€§çš„è¯æ˜å…¶å®å’Œæ–¹æ³•ä¸€ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‰æ–¹æ³•ä¸€çš„æ–¹æ³•ï¼Œè€ƒè™‘ä¸åŒç¤ºä¾‹æ•°ç»„ä¸­ç¬¬ ii ä½ 11 çš„ä¸ªæ•° xx çš„å˜åŒ–ï¼š

å¦‚æœæµ‹è¯•ç”¨ä¾‹çš„æ•°ç»„ä¸­ \textit{target}target å‡ºç°äº†ä¸¤æ¬¡ï¼Œå…¶ä½™çš„æ•°å„å‡ºç°äº†ä¸€æ¬¡ï¼Œä¸” \textit{target}target çš„ç¬¬ ii ä½ä¸º 11ï¼Œé‚£ä¹ˆ \textit{nums}[]nums[] æ•°ç»„ä¸­ç¬¬ ii ä½ 11 çš„ä¸ªæ•° xx æ°å¥½æ¯” yy å¤§ä¸€ã€‚å¦‚æœ\textit{target}target çš„ç¬¬ ii ä½ä¸º 00ï¼Œé‚£ä¹ˆä¸¤è€…ç›¸ç­‰ã€‚
å¦‚æœæµ‹è¯•ç”¨ä¾‹çš„æ•°ç»„ä¸­ \textit{target}target å‡ºç°äº†ä¸‰æ¬¡åŠä»¥ä¸Šï¼Œé‚£ä¹ˆå¿…ç„¶æœ‰ä¸€äº›æ•°ä¸åœ¨ \textit{nums}[]nums[] æ•°ç»„ä¸­äº†ï¼Œè¿™ä¸ªæ—¶å€™ç›¸å½“äºæˆ‘ä»¬ç”¨ \textit{target}target å»æ›¿æ¢äº†è¿™äº›æ•°ï¼Œæˆ‘ä»¬è€ƒè™‘æ›¿æ¢çš„æ—¶å€™å¯¹ xx çš„å½±å“ï¼š
å¦‚æœè¢«æ›¿æ¢çš„æ•°ç¬¬ ii ä½ä¸º 11ï¼Œä¸” \textit{target}target ç¬¬ ii ä½ä¸º 11ï¼šxx ä¸å˜ï¼Œæ»¡è¶³ x>yx>yã€‚
å¦‚æœè¢«æ›¿æ¢çš„æ•°ç¬¬ ii ä½ä¸º 00ï¼Œä¸” \textit{target}target ç¬¬ ii ä½ä¸º 11ï¼šxx åŠ ä¸€ï¼Œæ»¡è¶³ x>yx>yã€‚
å¦‚æœè¢«æ›¿æ¢çš„æ•°ç¬¬ ii ä½ä¸º 11ï¼Œä¸” \textit{target}target ç¬¬ ii ä½ä¸º 00ï¼šxx å‡ä¸€ï¼Œæ»¡è¶³ x\le yxâ‰¤yã€‚
å¦‚æœè¢«æ›¿æ¢çš„æ•°ç¬¬ ii ä½ä¸º 00ï¼Œä¸” \textit{target}target ç¬¬ ii ä½ä¸º 00ï¼šxx ä¸å˜ï¼Œæ»¡è¶³ x\le yxâ‰¤yã€‚
ä¹Ÿå°±æ˜¯è¯´å¦‚æœ \textit{target}target ç¬¬ ii ä½ä¸º 11ï¼Œé‚£ä¹ˆæ¯æ¬¡æ›¿æ¢ååªä¼šä½¿ xx ä¸å˜æˆ–å¢å¤§ï¼Œå¦‚æœä¸º 00ï¼Œåªä¼šä½¿ xx ä¸å˜æˆ–å‡å°ï¼Œå§‹ç»ˆæ»¡è¶³ x>yx>y æ—¶ \textit{target}target ç¬¬ ii ä½ä¸º 11ï¼Œå¦åˆ™ä¸º 00ï¼Œå› æ­¤æˆ‘ä»¬åªè¦æŒ‰ä½è¿˜åŸè¿™ä¸ªé‡å¤çš„æ•°å³å¯ã€‚


class Solution {
    public int findDuplicate(int[] nums) {
        int n = nums.length, ans = 0;
        int bit_max = 31;
        while (((n - 1) >> bit_max) == 0) {
            bit_max -= 1;
        }
        for (int bit = 0; bit <= bit_max; ++bit) {
            int x = 0, y = 0;
            for (int i = 0; i < n; ++i) {
                if ((nums[i] & (1 << bit)) != 0) {
                    x += 1;
                }
                if (i >= 1 && ((i & (1 << bit)) != 0)) {
                    y += 1;
                }
            }
            if (x > y) {
                ans |= 1 << bit;
            }
        }
        return ans;
    }
}
å¤æ‚åº¦è¯æ˜

æ—¶é—´å¤æ‚åº¦ï¼šO(n\log n)O(nlogn)ï¼Œå…¶ä¸­ nn ä¸º \textit{nums}[]nums[] æ•°ç»„çš„é•¿åº¦ã€‚O(\log n)O(logn) ä»£è¡¨äº†æˆ‘ä»¬æšä¸¾äºŒè¿›åˆ¶æ•°çš„ä½æ•°ä¸ªæ•°ï¼Œæšä¸¾ç¬¬ ii ä½çš„æ—¶å€™éœ€è¦éå†æ•°ç»„ç»Ÿè®¡ xx å’Œ yy çš„ç­”æ¡ˆï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º O(n\log n)O(nlogn)ã€‚

ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚

æ–¹æ³•ä¸‰ï¼šå¿«æ…¢æŒ‡é’ˆ
é¢„å¤‡çŸ¥è¯†

æœ¬æ–¹æ³•éœ€è¦è¯»è€…å¯¹ ã€ŒFloyd åˆ¤åœˆç®—æ³•ã€ï¼ˆåˆç§°é¾Ÿå…”èµ›è·‘ç®—æ³•ï¼‰æœ‰æ‰€äº†è§£ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ£€æµ‹é“¾è¡¨æ˜¯å¦æœ‰ç¯çš„ç®—æ³•ï¼ŒLeetCode ä¸­ç›¸å…³ä¾‹é¢˜æœ‰ 141. ç¯å½¢é“¾è¡¨ï¼Œ142. ç¯å½¢é“¾è¡¨ IIã€‚

æ€è·¯å’Œç®—æ³•

æˆ‘ä»¬å¯¹ \textit{nums}[]nums[] æ•°ç»„å»ºå›¾ï¼Œæ¯ä¸ªä½ç½® ii è¿ä¸€æ¡ i\rightarrow \textit{nums}[i]iâ†’nums[i] çš„è¾¹ã€‚ç”±äºå­˜åœ¨çš„é‡å¤çš„æ•°å­— \textit{target}targetï¼Œå› æ­¤ \textit{target}target è¿™ä¸ªä½ç½®ä¸€å®šæœ‰èµ·ç ä¸¤æ¡æŒ‡å‘å®ƒçš„è¾¹ï¼Œå› æ­¤æ•´å¼ å›¾ä¸€å®šå­˜åœ¨ç¯ï¼Œä¸”æˆ‘ä»¬è¦æ‰¾åˆ°çš„ \textit{target}target å°±æ˜¯è¿™ä¸ªç¯çš„å…¥å£ï¼Œé‚£ä¹ˆæ•´ä¸ªé—®é¢˜å°±ç­‰ä»·äº 142. ç¯å½¢é“¾è¡¨ IIã€‚

æˆ‘ä»¬å…ˆè®¾ç½®æ…¢æŒ‡é’ˆ \textit{slow}slow å’Œå¿«æŒ‡é’ˆ \textit{fast}fast ï¼Œæ…¢æŒ‡é’ˆæ¯æ¬¡èµ°ä¸€æ­¥ï¼Œå¿«æŒ‡é’ˆæ¯æ¬¡èµ°ä¸¤æ­¥ï¼Œæ ¹æ®ã€ŒFloyd åˆ¤åœˆç®—æ³•ã€ä¸¤ä¸ªæŒ‡é’ˆåœ¨æœ‰ç¯çš„æƒ…å†µä¸‹ä¸€å®šä¼šç›¸é‡ï¼Œæ­¤æ—¶æˆ‘ä»¬å†å°† \textit{slow}slow æ”¾ç½®èµ·ç‚¹ 00ï¼Œä¸¤ä¸ªæŒ‡é’ˆæ¯æ¬¡åŒæ—¶ç§»åŠ¨ä¸€æ­¥ï¼Œç›¸é‡çš„ç‚¹å°±æ˜¯ç­”æ¡ˆã€‚



è¿™é‡Œç®€å•è§£é‡Šä¸ºä»€ä¹ˆåé¢å°† \textit{slow}slow æ”¾ç½®èµ·ç‚¹åç§»åŠ¨ç›¸é‡çš„ç‚¹å°±ä¸€å®šæ˜¯ç­”æ¡ˆäº†ã€‚å‡è®¾ç¯é•¿ä¸º LLï¼Œä»èµ·ç‚¹åˆ°ç¯çš„å…¥å£çš„æ­¥æ•°æ˜¯ aaï¼Œä»ç¯çš„å…¥å£ç»§ç»­èµ° bb æ­¥åˆ°è¾¾ç›¸é‡ä½ç½®ï¼Œä»ç›¸é‡ä½ç½®ç»§ç»­èµ° cc æ­¥å›åˆ°ç¯çš„å…¥å£ï¼Œåˆ™æœ‰ b+c=Lb+c=Lï¼Œå…¶ä¸­ LLã€aaã€bbã€cc éƒ½æ˜¯æ­£æ•´æ•°ã€‚æ ¹æ®ä¸Šè¿°å®šä¹‰ï¼Œæ…¢æŒ‡é’ˆèµ°äº† a+ba+b æ­¥ï¼Œå¿«æŒ‡é’ˆèµ°äº† 2(a+b)2(a+b) æ­¥ã€‚ä»å¦ä¸€ä¸ªè§’åº¦è€ƒè™‘ï¼Œåœ¨ç›¸é‡ä½ç½®ï¼Œå¿«æŒ‡é’ˆæ¯”æ…¢æŒ‡é’ˆå¤šèµ°äº†è‹¥å¹²åœˆï¼Œå› æ­¤å¿«æŒ‡é’ˆèµ°çš„æ­¥æ•°è¿˜å¯ä»¥è¡¨ç¤ºæˆ a+b+kLa+b+kLï¼Œå…¶ä¸­ kk è¡¨ç¤ºå¿«æŒ‡é’ˆåœ¨ç¯ä¸Šèµ°çš„åœˆæ•°ã€‚è”ç«‹ç­‰å¼ï¼Œå¯ä»¥å¾—åˆ°

2(a+b)=a+b+kL
2(a+b)=a+b+kL

è§£å¾— a=kL-ba=kLâˆ’bï¼Œæ•´ç†å¯å¾—

a=(k-1)L+(L-b)=(k-1)L+c
a=(kâˆ’1)L+(Lâˆ’b)=(kâˆ’1)L+c

ä»ä¸Šè¿°ç­‰å¼å¯çŸ¥ï¼Œå¦‚æœæ…¢æŒ‡é’ˆä»èµ·ç‚¹å‡ºå‘ï¼Œå¿«æŒ‡é’ˆä»ç›¸é‡ä½ç½®å‡ºå‘ï¼Œæ¯æ¬¡ä¸¤ä¸ªæŒ‡é’ˆéƒ½ç§»åŠ¨ä¸€æ­¥ï¼Œåˆ™æ…¢æŒ‡é’ˆèµ°äº† aa æ­¥ä¹‹ååˆ°è¾¾ç¯çš„å…¥å£ï¼Œå¿«æŒ‡é’ˆåœ¨ç¯é‡Œèµ°äº† k-1kâˆ’1 åœˆä¹‹ååˆèµ°äº† cc æ­¥ï¼Œç”±äºä»ç›¸é‡ä½ç½®ç»§ç»­èµ° cc æ­¥å³å¯å›åˆ°ç¯çš„å…¥å£ï¼Œå› æ­¤å¿«æŒ‡é’ˆä¹Ÿåˆ°è¾¾ç¯çš„å…¥å£ã€‚ä¸¤ä¸ªæŒ‡é’ˆåœ¨ç¯çš„å…¥å£ç›¸é‡ï¼Œç›¸é‡ç‚¹å°±æ˜¯ç­”æ¡ˆã€‚


class Solution {
    public int findDuplicate(int[] nums) {
        int slow = 0, fast = 0;
        do {
            slow = nums[slow];
            fast = nums[nums[fast]];
        } while (slow != fast);
        slow = 0;
        while (slow != fast) {
            slow = nums[slow];
            fast = nums[fast];
        }
        return slow;
    }
}
å¤æ‚åº¦åˆ†æ

æ—¶é—´å¤æ‚åº¦ï¼šO(n)O(n)ã€‚ã€ŒFloyd åˆ¤åœˆç®—æ³•ã€æ—¶é—´å¤æ‚åº¦ä¸ºçº¿æ€§çš„æ—¶é—´å¤æ‚åº¦ã€‚

ç©ºé—´å¤æ‚åº¦ï¼šO(1)O(1)ã€‚æˆ‘ä»¬åªéœ€è¦å¸¸æ•°ç©ºé—´å­˜æ”¾è‹¥å¹²å˜é‡ã€‚

public class Solution {
    public int FindDuplicate(int[] nums) {
        var noDup = new HashSet<int>();
        foreach(var num in nums){
           if(noDup.Add(num)==false){
               return num;
           }
        }
        return 0;
    }
}



public class Solution {
    public int FindDuplicate(int[] nums) {
        // HashSet<int> set=new HashSet<int>();
        // for(int i=0;i<nums.Length;i++)
        // {
        //     if(!set.Add(nums[i]))
        //     {
        //         return nums[i];
        //     }
        // }
        // return -1;

        int n=nums.Length-1;
        int left=1;
        int right=n;
        while(left<right)
        {
            int mid=left+(right-left)/2;

            //æ ¹æ®æŠ½å±‰åŸç†
            //è®¡ç®—ä¸å¤§äº midçš„ä¸ªæ•°ï¼Œå¦‚æœ ä¸ªæ•°å¤§äºmid é‚£è¯´æ˜é‡å¤æ•°å­—è‚¯å®šåœ¨[1,mid]
            int count=0;
            for(int i=0;i<nums.Length;i++)
            {
                if(nums[i]<=mid)
                {
                    count++;
                }
            }
            if(count>mid)
            {
                //è¯´æ˜[1,mid] é‡å¤æ•°å­—è‚¯å®šåœ¨è¿™ä¸ªåŒºé—´
                right=mid;
            }else
            {
                //è¯´æ˜[mid+1,n] é‡å¤æ•°å­—åœ¨è¿™ä¸ªåŒºé—´
                left=mid+1;
            }
        }
        return left;
    }
}



public class Solution {
    public int FindDuplicate(int[] nums) {
        int fast = 0, slow = 0;
        while(true) {
            fast = nums[nums[fast]];
            slow = nums[slow];
            if(slow == fast) {
                fast = 0;
                while(nums[slow] != nums[fast]) {
                    fast = nums[fast];
                    slow = nums[slow];
                }
                return nums[slow];
            }
        }
    }
}

     
*/
